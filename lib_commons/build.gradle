/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java library project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.1.1/userguide/building_java_projects.html
 */
buildscript {
    ext {
        springBootVersion = '2.4.9'
        springCloudVersion = 'Greenwich.M1'
        aws_version = '2.0.0-preview-2'
        mapstructVersion = "1.3.1.Final"
        lombokVersion = '1.18.20'
        reactorVersion = '3.3.20.RELEASE'
        reactorAddonsVersion = '3.4.4'
        repoUrl = project.hasProperty('repository') ? project.getProperty('repository') : 'https://artifactory.apps.bancolombia.com/maven-bancolombia'
        grupo = project.hasProperty('grupo') ? project.getProperty('grupo') : 'co.com.bancolombia.vinculacion-transversal.libs'
        artefact = project.hasProperty('artefacto') ? project.getProperty('artefacto') : 'vinculacion-transversal-generic-commons'
        numero = project.hasProperty('numero') ? project.getProperty('numero') : '1.0.40'
        user = project.hasProperty('usuario') ? project.getProperty('usuario') : ''
        psw = project.hasProperty('clave') ? project.getProperty('clave') : ''
    }

    repositories {
        mavenCentral()
        maven { url 'https://artifactory.apps.bancolombia.com:443/maven-bancolombia'}
    }

    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:2.1.6.RELEASE")
    }
}

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'io.spring.dependency-management'
apply plugin: 'jacoco'
apply plugin: 'maven-publish'

repositories {
    mavenCentral()
    maven {url 'https://artifactory.apps.bancolombia.com/maven-bancolombia'}
}


dependencies {
    compileOnly "org.projectlombok:lombok:1.18.20"
    annotationProcessor  "org.projectlombok:lombok:1.18.20"
    testCompileOnly  "org.projectlombok:lombok:1.18.20"
    testAnnotationProcessor  "org.projectlombok:lombok:1.18.20"

    implementation group: 'org.springframework', name: 'spring-context', version: '5.3.9'
    compileOnly group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.1'


    implementation 'io.springfox:springfox-swagger2:2.9.2'
    implementation 'io.springfox:springfox-swagger-ui:2.9.2'

    implementation "org.springframework.boot:spring-boot-starter:2.4.9"
    implementation "org.springframework.boot:spring-boot-starter-test:2.4.9"
    implementation "org.springframework.boot:spring-boot-starter-web:2.4.9"
    implementation "org.springframework.boot:spring-boot-starter-validation:2.4.9"
    implementation "org.springframework.boot:spring-boot-starter-webflux:${springBootVersion}"

    implementation group: 'com.google.code.gson', name: 'gson', version: '2.8.7'

    implementation group: 'org.apache.commons', name: 'commons-dbcp2', version: '2.9.0'

    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.12.0'


// Use JUnit test framework

    testImplementation group: 'org.mockito', name: 'mockito-core', version: '3.11.2'
    implementation group: 'org.agileware', name: 'smartunit', version: '0.10.2'


    implementation(group: 'co.com.bancolombia.vinculacion-transversal.libs', name: 'vinculacion-transversal-technical', version: '1.0.1')
}

sourceSets {
    main.java.srcDirs += "build/generated/source/apt/main"
}

jar {
    enabled = true
    manifest.attributes provider: 'EVC Conocimiento del cliente - Vinculacion transversal - lib_commons'
    archivesBaseName = "$artefact"
    version = "$numero"
}



jacoco {
    toolVersion = "0.8.7"
    reportsDir = file("$buildDir/customJacocoReportDir")
}

jacocoTestReport {
    reports {
        xml.enabled true
        csv.enabled false
        html.destination file("${buildDir}/jacocoHtml")
        xml.destination file("${buildDir}/report.xml")
    }
}
sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8
compileJava.options.encoding = 'UTF-8'
compileTestJava.options.encoding = 'UTF-8'



dependencyManagement {
    imports {
        //mavenBom "org.springframework.boot:spring-boot-gradle-plugin:2.4.9"
        //mavenBom "org.springframework.cloud:spring-cloud-dependencies:2.4.9"
    }
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            groupId "$grupo"
            artifactId "$artefact"
            version "$numero"
            from components.java
        }
    }
    repositories {
        maven {
            url "$repoUrl"
            credentials {
                username = "$user"
                password = "$psw"
            }
        }
    }
}

